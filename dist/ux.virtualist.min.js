!function(e){"use strict";e.module("ux.virtualist",[]).directive("uxVirtualist",function(){return{restrict:"A",replace:!1,scope:{uxVirtualist:"="},link:function(t,i,l){function n(){for(var e="",i="",l=0;l<m.length;l++){i=v;for(var n=0;n<V.length;n++)console.log(t.uxVirtualist[l]),i=i.replace("{{"+V[n]+"}}",m[l][V[n]]);e+="<div>"+i+"</div>"}x.innerHTML=e}for(var r=i[0],o=r.parentNode,s=o.offsetHeight,u=l.uxVirtualistItemheight||25,c=t.uxVirtualist,a=c.length,p=document.createElement("div"),d=Math.ceil(s/u),h=0,f=a,x=document.createElement("div"),m=t.uxVirtualist.slice(0,d),v=r.innerHTML.replace("::",""),g=v.split("{{"),V=[],M=0;M<g.length;M++)g[M].indexOf("}}")>-1&&V.push(g[M].substr(0,g[M].indexOf("}}")));o.removeChild(r),e.element(p).css({height:u*a+"px"}),e.element(x).css({position:"absolute",top:0}),o.appendChild(p),p.appendChild(x),n(),e.element(o).on("scroll",function(){h=Math.floor(o.scrollTop/u),f=h+d,m=t.uxVirtualist.slice(h,f),e.element(x).css({top:o.scrollTop+"px"}),n()})}}})}(angular);
