!function(e){"use strict";e.module("ux.virtualist",[]).directive("uxVirtualist",function(){return{restrict:"A",replace:!1,scope:{uxVirtualist:"="},link:function(t,i,l){function n(){for(var e="",t="",i=0;i<d.length;i++){t=h;for(var l=0;l<m.length;l++)t=t.replace("{{"+m[l]+"}}",d[i][m[l]]);e+="<div>"+t+"</div>"}p.innerHTML=e}for(var r=i[0],s=r.parentNode,o=s.offsetHeight,u=l.uxVirtualistItemheight||25,c=document.createElement("div"),a=Math.ceil(o/u),p=document.createElement("div"),d=t.uxVirtualist.slice(0,a),h=r.innerHTML.replace("::",""),f=h.split("{{"),m=[],v=0;v<f.length;v++)f[v].indexOf("}}")>-1&&m.push(f[v].substr(0,f[v].indexOf("}}")));s.removeChild(r),e.element(c).css({height:u*t.uxVirtualist.length+"px"}),e.element(p).css({position:"absolute",top:0}),s.appendChild(c),c.appendChild(p),n(),e.element(s).on("scroll",function(){var i=Math.floor(s.scrollTop/u),l=i+a;d=t.uxVirtualist.slice(i,l),e.element(p).css({top:s.scrollTop+"px"}),n()})}}})}(angular);
