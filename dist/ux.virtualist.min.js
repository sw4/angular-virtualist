!function(e){"use strict";e.module("ux.virtualist",[]).directive("uxVirtualist",function(){return{restrict:"A",replace:!1,scope:{uxVirtualist:"="},link:function(t,i,n){function l(){var i="",n="";o*t.uxVirtualist.length!==d&&(d=o*t.uxVirtualist.length,e.element(h).css({height:d+"px",width:"100%"}));for(var l=0;l<f.length;l++){n=b;for(var r=0;r<g.length;r++)n=n.replace("{{"+g[r]+"}}",f[l][g[r]]);i+=n}m.innerHTML=i}function r(){f=t.uxVirtualist.slice(v,x),l()}function u(){v=Math.floor(c.scrollTop/o),x=v+p,r()}var s=i[0],c=s.parentNode,a=c.offsetHeight,o=parseInt(n.uxVirtualistItemheight,0)||25,h=document.createElement("div"),d=0,p=Math.ceil(a/o),m=document.createElement(c.tagName),f=t.uxVirtualist.slice(0,p),g=[],v=0,x=0,V=document.createElement("div"),b="";V.appendChild(s),V.children[0].removeAttribute("ux-virtualist"),V.children[0].removeAttribute("ux-virtualist-itemheight"),e.element(V.children[0]).removeClass("ng-scope ng-binding ng-isolate-scope"),V.children[0].getAttribute("class")||V.children[0].removeAttribute("class"),b=V.innerHTML,b=b.replace("::","");for(var A=b.split("{{"),C=0;C<A.length;C++)A[C].indexOf("}}")>-1&&g.push(A[C].substr(0,A[C].indexOf("}}")));e.element(m).css({position:"absolute",top:0,width:"100%"}),t.$watch("uxVirtualist",function(){r()}),c.appendChild(h),h.appendChild(m),u(),e.element(c).on("scroll",function(){u(),e.element(m).css({top:c.scrollTop+"px"})})}}})}(angular);
